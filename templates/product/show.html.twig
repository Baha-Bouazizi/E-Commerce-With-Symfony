{% extends 'base.html.twig' %}

{% block title %}{{ product.name }}{% endblock %}

{% block body %}
    <div class="product-detail">
        <div class="row">
            <div class="col-md-5">
                <img class="img-fluid" src="/uploads/{{product.image}}" alt="{{product.name}}">
                
                {% if product.category %}
                <div class="mt-3">
                    <a href="{{ path('product') }}#category-{{ product.category.id }}" class="category-pill">
                        <i class="bi bi-tag"></i> {{ product.category.name }}
                    </a>
                </div>
                {% endif %}
            </div>
            <div class="col-md-7">
                <nav aria-label="breadcrumb" class="mb-3">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="{{ path('home') }}">Accueil</a></li>
                        <li class="breadcrumb-item"><a href="{{ path('product') }}">Produits</a></li>
                        {% if product.category %}
                        <li class="breadcrumb-item"><a href="{{ path('product') }}#category-{{ product.category.id }}">{{ product.category.name }}</a></li>
                        {% endif %}
                        <li class="breadcrumb-item active" aria-current="page">{{ product.name }}</li>
                    </ol>
                </nav>
                
                <h1 class="product-detail-title">{{product.name}}</h1>
                <p class="product-detail-subtitle">{{product.subtitle}}</p>
                
                <div class="product-detail-price">{{(product.price / 100 )|number_format(2,',', '.')}} â‚¬</div>
                
                {% if product.stock > 0 %}
                    <div class="badge badge-stock mb-3">En stock ({{ product.stock }} disponibles)</div>
                {% else %}
                    <div class="badge badge-out mb-3">Rupture de stock</div>
                {% endif %}
                
                <div class="product-detail-description mt-4">
                    <h4>Description</h4>
                    <p>{{product.description}}</p>
                </div>
                
                <div class="mt-4">
                    <a href="{{ path('add_to_cart', {id: product.id}) }}" class="btn btn-cart {% if product.stock <= 0 %}disabled{% endif %}">
                        <i class="bi bi-cart-plus me-2"></i> Ajouter au panier
                    </a>
                    <a href="{{ path('product') }}" class="btn btn-outline-secondary ms-2">
                        <i class="bi bi-arrow-left me-2"></i> Retour aux produits
                    </a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
